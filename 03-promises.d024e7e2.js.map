{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,WAoDA,SAASC,EAAUC,GACjBC,EAAAJ,GAASK,OAAOC,QAAQH,GACxBI,QAAQC,IAAIL,E,CAEd,SAASM,EAAQC,GACfN,EAAAJ,GAASK,OAAOM,QAAQD,GACxBH,QAAQC,IAAIE,E,EAvDD,CACXE,KAAMC,SAASC,cAAc,WAG1BF,KAAKG,iBAAiB,UAE3B,SAAsBC,GACpBA,EAAIC,iBAEJ,MAAMC,EAAaC,OAAOH,EAAII,OAAOC,MAAMC,OACrCC,EAAYJ,OAAOH,EAAII,OAAOI,KAAKF,OACnCG,EAASN,OAAOH,EAAII,OAAOK,OAAOH,OAElCI,EAAc,CAClBL,MAAOH,EAAaK,EACpBI,SAAU,GAGZ,IAAIC,SAAQ,SAAUC,EAASC,GAC7B,MAAMC,EAAaC,aAAY,KAC7BN,EAAYC,UAAY,EACxBD,EAAYL,OAASE,EAEjBG,EAAYC,UAAYF,IAC1BK,EACE1B,EAAAJ,GAASK,OAAO4B,KACd,eAAeP,EAAYC,+BAG/BO,cAAcH,IAEhBF,EAKN,UAAuBF,SAAEA,EAAQN,MAAEA,IACjC,OAAO,IAAIO,SAAQ,CAACC,EAASC,KAC3BK,YAAW,KACaC,KAAKC,SAAW,GAGpCR,EAAQ,uBAAqBF,QAAiBN,OAE5CS,EAAK,sBAAoBH,QAAeN,MAAU,GAErDA,EAAM,G,CAfCiB,CAAcZ,GAAaa,KAAKrC,GAAWsC,MAAM/B,GAAS,G,GAEnEc,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n  form: document.querySelector('.form'),\n};\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  const startValue = Number(evt.target.delay.value);\n  const stepValue = Number(evt.target.step.value);\n  const amount = Number(evt.target.amount.value);\n\n  const promiseData = {\n    delay: startValue - stepValue,\n    position: 0,\n  };\n\n  new Promise(function (resolve, reject) {\n    const intervalId = setInterval(() => {\n      promiseData.position += 1;\n      promiseData.delay += stepValue;\n\n      if (promiseData.position >= amount) {\n        reject(\n          Notiflix.Notify.info(\n            `Creation of ${promiseData.position} promises started `\n          )\n        );\n        clearInterval(intervalId);\n      }\n      resolve(createPromise(promiseData).then(onSuccess).catch(onError));\n    });\n  }, stepValue);\n}\n\nfunction createPromise({ position, delay }) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n\n      if (shouldResolve) {\n        resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      } else {\n        reject(`❌ Rejected promise ${position} in ${delay}ms`);\n      }\n    }, delay);\n  });\n}\nfunction onSuccess(result) {\n  Notiflix.Notify.success(result);\n  console.log(result);\n}\nfunction onError(error) {\n  Notiflix.Notify.failure(error);\n  console.log(error);\n}\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$onSuccess","result","$parcel$interopDefault","Notify","success","console","log","$47d4ff9957288465$var$onError","error","failure","form","document","querySelector","addEventListener","evt","preventDefault","startValue","Number","target","delay","value","stepValue","step","amount","promiseData","position","Promise","resolve","reject","intervalId","setInterval","info","clearInterval","setTimeout","Math","random","$47d4ff9957288465$var$createPromise","then","catch"],"version":3,"file":"03-promises.d024e7e2.js.map"}